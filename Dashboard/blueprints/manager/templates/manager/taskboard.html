{% extends 'manager/base.html' %}
{% from 'macros/designs.html' import loader %}

{% block app %}
<div ng-controller="tbCtrl" ng-cloak class="container">
    <div ng-switch="loading">
        <div ng-switch-when="true">
            {{ loader() }}
        </div>
        <div ng-switch-default>
            <div class="row">
              <table class="bordered">
                  <thead>
                  <tr>
                      <th>ID</th>
                      <th>Source</th>
                      <th>Destination</th>
                      <th>Ready time</th>
                      <th>Containers</th>
                      <th>Driver</th>
                      <th>Progress</th>
                  </tr>
                  </thead>

                  <tbody>
                  <tr ng-repeat="task in tasks">
                      <td>[[ task.task_id ]]</td>
                      <td>[[ task.source ]]</td>
                      <td>[[ task.destination ]]</td>
                      <td>[[ task.ready_time ]]</td>
                      <td>[[ task.containers ]]</td>
                      <td>
                          <div class="input-field">
                              <select>
                                  <option></option>
                                  <option ng-selected="d.name === task.driver" ng-repeat="d in drivers">[[ d.name ]]</option>
                              </select>
                          </div>
                      </td>
                      <td ng-show="task.status == 'Ready'" ><i class="material-icons">perm_identity</i><label>Ready</label></td>
                      <td ng-show="task.status == 'En-route'"><i class="material-icons">trending_flat</i><label>Enroute</label></td>
                      <td ng-show="task.status == 'Done'" ><i class="material-icons">done</i><label>Done</label></td>
                    </tr>
                  </tbody>
              </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
{% endblock %}
